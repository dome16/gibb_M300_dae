###    ###   ###   ###   ###

###    VMLS3 Config      ###

###    ###   ###   ###   ###
	
sudo apt -y install apache2			// Apache2 mit apt installieren

sudo mkdir -p /www/www.smartlearn.lan/err	// Ordnerstruktur nach Vorgaben erstellen (-p --> Erstelle Alle Ordner vom Pfad die noch nicht existieren)
sudo mkdir -p /www/ku1.smartlearn.lan/err
sudo mkdir -p /www/ku2.smartlearn.lan/err

sudo vi /etc/apache2/sites-available/www.smartlearn.lan.conf		// VirtualHost Config File Erstellen (namen ist egal bis auf .conf am schluss)

// Inhalt des Files:
<VirtualHost *:80>							// Definition VirtualHost
        ServerAdmin webmaster@localhost					// Email meist gleich wie im Bind9 Zonefile angegeben
        ServerName www.smartlearn.lan					// Domain Name unter dem die Seite Erreichbar sein sollte
        DocumentRoot /www/www.smartlearn.lan				// Hier werden die Files abgelegt (index.html usw...)				
        <Directory /www/www.smartlearn.lan>				// Setzen einiger Berechtigungen für Apache in diesem Ortner
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Require all granted
        </Directory>
        ErrorLog /www/www.smartlearn.lan/err/error.log			// Location vom error.log
        LogLevel warn
        CustomLog /www/www.smartlearn.lan/err/access.log combined	// Location vom access.log
</VirtualHost>								// Ende des Virtual Hostes

sudo a2ensite www.smartlearn.lan.conf					// Seite mit a2ensite enablen (erstellt symlink im Ordner /etc/apache2/sites-enabled)
sudo systemctl restart apache2.service					// Apache2 neustarten (aufpassen bei Produktiven systemen reload verwenden)

// Optional
sudo vi /www/www.smartlearn.lan/index.html				//  Kleine Testseite  damit man sieht das es funktioniert

sudo vi /etc/apache2/sites-available/ku1.smartlearn.lan.conf		// Config File für den Virtualhost vom ku1 erstellen

// Inhalt des Files:
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName ku1.smartlearn.lan
        DocumentRoot /www/ku1.smartlearn.lan
        <Directory /www/ku1.smartlearn.lan>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Require all granted
        </Directory>
        ErrorLog /www/ku1.smartlearn.lan/err/error.log
        LogLevel warn
        CustomLog /www/ku1.smartlearn.lan/err/access.log combined
</VirtualHost>

sudo a2ensite ku1.smartlearn.lan.conf					// Seite mit a2ensite enablen (erstellt symlink im Ordner /etc/apache2/sites-enabled)
sudo systemctl restart apache2.service					// Apache2 neustarten (aufpassen bei Produktiven systemen reload verwenden)

sudo vi /etc/apache2/sites-available/ku2.smartlearn.lan.conf		// Config File für den Virtualhost vom ku2 erstellen

// Inhhaalt des Files:
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName ku2.smartlearn.lan
        DocumentRoot /www/ku2.smartlearn.lan
        <Directory /www/ku2.smartlearn.lan>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Require all granted
        </Directory>
        ErrorLog /www/ku2.smartlearn.lan/err/error.log
        LogLevel warn
        CustomLog /www/ku2.smartlearn.lan/err/access.log combined
</VirtualHost>

sudo a2ensite ku2.smartlearn.lan.conf					// Seite mit a2ensite enablen (erstellt symlink im Ordner /etc/apache2/sites-enabled)
sudo systemctl restart apache2.service					// Apache2 neustarten (aufpassen bei Produktiven systemen reload verwenden)
